---
import '../styles/global.css';
import { ThemeToggle } from '../components/ThemeToggle';

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
        <!-- Google Fonts: Inter & JetBrains Mono -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
		<script is:inline>
			// Initialize theme to prevent flash
			const theme = (() => {
				if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
					return localStorage.getItem('theme');
				}
				if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
					return 'dark';
				}
				return 'light';
			})();
		
			if (theme === 'dark') {
				document.documentElement.classList.add('dark');
			} else {
				document.documentElement.classList.remove('dark');
			}
		</script>
        <style>
            /* Animated Mesh Gradient Background */
            @keyframes blob {
                0% { transform: translate(0px, 0px) scale(1); }
                33% { transform: translate(30px, -50px) scale(1.1); }
                66% { transform: translate(-20px, 20px) scale(0.9); }
                100% { transform: translate(0px, 0px) scale(1); }
            }
            .animate-blob {
                animation: blob 10s infinite;
            }
            .animation-delay-2000 {
                animation-delay: 2s;
            }
            .animation-delay-4000 {
                animation-delay: 4s;
            }
        </style>
	</head>
	<body class="bg-[#020617] min-h-screen relative overflow-x-hidden text-white selection:bg-blue-500/30 font-['Inter',sans-serif]">
		<!-- Animated Mesh Gradient Background -->
		<div class="fixed inset-0 z-[-1] overflow-hidden pointer-events-none">
            <div class="absolute inset-0 bg-gradient-to-br from-[#020617] via-[#0f172a] to-[#020617]"></div>
            <div class="absolute top-0 -left-4 w-96 h-96 bg-blue-500/20 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"></div>
            <div class="absolute top-0 -right-4 w-96 h-96 bg-purple-500/20 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"></div>
            <div class="absolute -bottom-8 left-20 w-96 h-96 bg-teal-500/10 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"></div>
            <div class="absolute inset-0 bg-[url('/noise.svg')] opacity-5 mix-blend-overlay"></div> 
        </div>

		<nav class="sticky top-0 z-50 bg-white/5 backdrop-blur-xl border-b border-white/10 shadow-[0_4px_30px_rgba(0,0,0,0.1)]">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
				<div class="flex justify-between items-center h-16">
					<a href="/" class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400">H2@Home</a>
					<div class="flex items-center space-x-8">
						<ul class="flex space-x-8">
							<li><a href="/" class="text-white/80 hover:text-white transition-colors duration-200 text-sm font-medium">Home</a></li>
							<li><a href="/dashboard" class="text-white/80 hover:text-white transition-colors duration-200 text-sm font-medium">Dashboard</a></li>
							<li><a href="/safety" class="text-white/80 hover:text-red-400 transition-colors duration-200 text-sm font-medium">Safety</a></li>
						</ul>
						<ThemeToggle client:load />
					</div>
				</div>
			</div>
		</nav>
		<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10">
			<slot />
		</main>
	</body>
</html>
